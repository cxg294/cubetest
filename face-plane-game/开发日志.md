# 面部识别飞机大战开发日志

## 2025-04-21
- 项目初始化
- 创建基本HTML、CSS和JavaScript文件结构
- 实现面部识别功能集成 (face-api.js)
- 实现基本游戏逻辑
- 添加玩家飞机控制 (脸部)
- 添加敌机生成系统
- 添加子弹系统
- 添加道具系统（分裂子弹和巨型子弹）
- 添加得分系统
- 添加游戏状态管理（开始、暂停、结束）
- 优化游戏界面

## 2025-04-21 (下午)
- **修改游戏尺寸:** 调整为竖屏 (600x800)
- **更换控制方式:** 移除 face-api.js，集成 MediaPipe Hands 进行手势识别 (食指指尖控制)
- **添加视觉反馈:** 成功识别手指时，飞机增加高亮描边
- **修复Bug:** 重新添加了在之前修改中误删的 `checkCollision` 函数，解决碰撞检测报错问题
- **视觉优化:** 为敌机和敌机子弹添加白色描边，提高可见性
- **平衡性调整:** 
    - 降低射击敌机（👹）的移动速度
    - 降低射击敌机（👹）的子弹发射频率
    - 调整敌机生成位置，避免在最左侧生成，优化手势控制体验
- 更新相关文档 (README, 开发日志)

## 2025-04-21 (下午 - 更新)
- **道具检查:** 确认子弹分裂道具 (🔄) 代码存在且逻辑正确，可能因生成率低未出现。
- **平衡性调整:** 将巨型子弹 (🐶) 的尺寸扩大一倍。

## 2025-04-21 (下午 - 第二次更新)
- **平衡性与视觉调整:**
    - 大幅增加分裂道具 (🔄) 和巨型子弹道具 (⭐) 的出现频率 (提高 `POWERUP_SPAWN_CHANCE`)
    - 增大普通玩家子弹 (🔥) 的尺寸
    - 增大所有敌方飞机 (👾, 👹) 的尺寸，并调整其生成边距和射击敌机的子弹发射位置
    - 将分裂道具和巨型子弹道具的下落速度翻倍

## 2025-04-21 (下午 - 第三次更新)
- **平衡性调整:**
    - 增加普通敌机 (👾) 的相对数量 (通过降低射击敌机 👹 的生成概率 `SHOOTER_ENEMY_SPAWN_CHANCE`)
    - 提高巨型子弹 (🐶) 的飞行速度
    - 降低玩家在巨型子弹道具 (⭐) 激活期间的发射频率 (通过为巨型子弹设置单独的、较慢的 `fireRate`)

## 2025-04-21 (下午 - 第四次更新)
- **平衡性调整:**
    - 增加总敌机数量约1.5倍 (通过缩短 `ENEMY_SPAWN_INTERVAL` 从 1000ms 至 667ms)

## 2025-04-21 (下午 - 第五次更新)
- **画面表现升级:**
    - **增大玩家飞机尺寸:** 玩家飞机 (🚀) emoji 变得更大。
    - **玩家飞机拖尾:** 为玩家飞机添加了淡淡的青色粒子拖尾效果。
    - **敌机击毁特效:** 敌机被击毁时会产生粒子爆炸效果 (普通敌机为橙色，射击敌机为番茄红色)。
    - **子弹光效:** 为所有类型的子弹 (玩家普通子弹🔥, 巨型子弹🐶, 敌方子弹⚡) 添加或增强了辉光效果。

## 2025-04-21 (下午 - 第六次更新)
- **画面表现再升级:**
    - **玩家受创反馈:** 
        - 屏幕在玩家受击时会轻微震动。
        - 屏幕在玩家受击时会瞬间闪烁半透明红色。
    - **强化道具拾取效果:** 
        - 玩家拾取分裂子弹或巨型子弹道具时，飞机周围会产生一圈与道具颜色相关的粒子爆发效果。
    - **游戏区域边缘装饰:** 
        - 为游戏画布添加了动态脉冲的淡蓝色边框，增加科技感。

## 2025-04-21 (下午 - 第七次更新)
- **UI Layout & Visual Enhancements:**
    - **UI Rearrangement:** 
        - Game info (score, lives), controls (buttons), and status messages moved to a new sidebar on the right of the game area.
        - HTML and CSS updated to support the new two-column layout.
    - **Powerup Visuals:**
        - Increased the base size of Powerup items (🔄, ⭐).
        - Added a "breathing" (pulsating size) animation to Powerup items for better visibility and a more dynamic feel.

## 2025-04-21 (下午 - 第八次更新)
- **Bug修复与功能增强:**
    - **修复持续抖动:** 游戏结束时，屏幕震动和闪烁效果现在会被正确停止。
    - **巨型子弹穿透:** 巨型子弹 (🐶) 现在可以穿透敌机，不会在第一次碰撞后消失，可以一次击中路径上的多个敌人。

## 2025-04-21 (下午 - 第九次更新)
- **进一步画面与体验优化:**
    - **得分即时反馈:** 击毁敌机时，会在其位置显示向上漂浮的得分数字，略微减少了爆炸粒子数以平衡性能。
    - **暂停状态强化:** 游戏暂停时，主画面会显示半透明蒙层和"已暂停"字样。
    - **UI文本样式:** 侧边栏中的分数、生命值等文本增加了阴影效果，并更换了更数字感的字体系列。
    - **游戏边框强化:** 游戏画布的动态边框增加了外层静态边框，形成更有层次感的视觉效果。

## 2025-04-21 (下午 - 第十次更新)
- **响应式布局初步实现:**
    - **CSS调整:** 修改了 `style.css`，使得主内容区 (`main-content-area`)、游戏列 (`game-column`) 和UI侧边栏 (`ui-sidebar`) 能够更灵活地适应不同浏览器窗口大小。
    - **游戏区宽高比保持:** 游戏容器 (`game-container`) 现在会根据其父容器的宽度自适应调整大小，同时通过 `aspect-ratio` 保持 `600:800` 的宽高比。它也有一个 `max-width: 600px`，以防止游戏画面被过度拉伸。
    - **内部逻辑不变:** 游戏JavaScript (`game.js`) 中的 `GAME_WIDTH` 和 `GAME_HEIGHT` (Canvas内部渲染尺寸) 保持不变，由浏览器负责缩放Canvas的显示。

## 2025-04-21 (下午 - 第十一次更新)
- **Gameplay & Visual Polish:**
    - **Player Bullet Style:** Player's normal bullets changed to white laser pulses with prominent blue-purple glowing/stroked edges.
    - **Giant Bullet Style:** Reverted to the '🐶' emoji with its original orange-red glow, maintaining its large size and rotation.
    - **Player Fire Rate:** Slightly increased player's base fire rate for more responsive shooting.
    - **New Powerup - Bomb (💣):** 
        - Added a 'Bomb' powerup. When collected, it instantly destroys all on-screen enemies.
        - Enemies destroyed by the bomb still award points and create explosion/score pop-up effects.
        - Bomb pickup triggers a distinct screen flash (yellowish) and shake.

## 2025-04-21 (下午 - 第十二次更新)
- **平衡性与视觉效果微调:**
    - **道具频率:** 略微降低了所有道具的整体出现概率 (调整 `POWERUP_SPAWN_CHANCE` 从 0.15 至 0.12)。
    - **炸弹效果区分:** 修改了炸弹 (💣) 道具引爆时的屏幕闪光效果，将其变为明亮的淡青蓝色，并微调了震动参数，使其与玩家受伤时的红色闪光有更明显的区别。

## 2025-04-21 (下午 - 第十三次更新)
- **道具平衡性与视觉调整:**
    - **道具频率调整:** 
        - 巨型子弹 (⭐) 道具的出现频率相对于分裂子弹 (🔄) 道具减少了一半。
        - 炸弹道具的出现频率调整为与巨型子弹道具相似。
    - **炸弹图标更换:** 炸弹道具的图标从 '💣' 更换为闪电 '⚡'。
    - **巨型子弹射速:** 显著提高了玩家在拥有巨型子弹道具时发射巨型子弹的频率 (减少了 `giantBulletFireRate`)。

## 2025-04-21 (下午 - 第十四次更新)
- **子弹视觉与敌方射击调整:**
    - **敌方射击间隔:** 射击型敌机 (👹) 的子弹发射间隔翻倍 (更慢)。
    - **敌方子弹样式:** 
        - 略微增大了敌方子弹 (⚡) 的尺寸。
        - 敌方子弹 Emoji (⚡) 本身颜色调整为橙红色，并带有白色高亮辉光，以模拟红色描边/危险感。
    - **我方子弹样式:** 玩家的激光脉冲子弹的辉光和描边颜色从之前的蓝紫色系更改为更具攻击性的橙红色系，核心保持白色。

## 2025-04-21 (下午 - 第十五次更新)
- **视觉效果修复与优化:**
    - **修正炸弹屏闪:** 修复了炸弹 (⚡) 道具引爆时的屏幕闪光效果未正确显示淡青蓝色，而是错误显示为玩家受伤时的红色的问题。现在炸弹爆炸会正确触发独特的淡青蓝色屏幕闪光。
    - **代码结构优化:** 调整了屏幕闪烁效果的内部变量管理，使其能更清晰地处理不同颜色和强度的闪烁效果。

## 2025-04-21 (下午 - 第十六次更新)
- **炸弹道具视觉效果重做与Bug修复:**
    - **修复屏闪混淆:** 彻底移除了炸弹 (⚡) 道具原有的屏幕闪烁效果，以解决其与玩家受伤时的红色屏闪效果混淆的问题。
    - **新增激光清屏效果:** 当拾取炸弹 (⚡) 道具时，现在会触发一个全新的视觉效果：一条明亮的青色激光束会从屏幕底部快速向上扫描至顶部，示意清场。
    - **保留震动:** 炸弹道具的屏幕震动效果予以保留，以增加冲击力。
    - **屏闪逻辑修正:** (附带修正) 确保了玩家受伤时的红色屏闪效果能正确使用其设定的持续时间和透明度衰减逻辑。

## 后续计划
- 添加更多敌机类型
- 添加更多道具类型
- 添加音效
- 添加关卡系统
- 添加排行榜
- 优化手势识别的精确度和稳定性
- 添加难度设置 